angular.module("angular.tourist",[]),angular.module("angular.tourist").directive("tourStep",["$tourist",function(t){return{restrict:"EAC",link:function(e,i,n){return t.registerStep(n.tourStep,i)}}}]),angular.module("angular.tourist").directive("tourTemplate",["$tourist","$window","$templateCache","$interpolate",function(t,e,i,n){return i.put("angular/tourist.html",'<div ng-class="styles" ng-if="$show" ng-class="class"> </div>'),{restrict:"EA",templateUrl:function(t,e){return e.src||"angular/tourist.html"},scope:{templateName:"@tourTemplate","class":"@activeClass"},controller:["$scope",function(t){var i;i=function(t){var i,n,s;if(null!=t&&(n=t.ownerDocument,s=n.documentElement,i="function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():void 0,null!=i))return{top:i.top+(e.pageYOffset||s.scrollTop)-(s.clientTop||0),left:i.left+(e.pageXOffset||s.scrollLeft)-(s.clientLeft||0),width:t.offsetWidth,height:t.offsetHeight}},this.show=function(e,s){return t.$show=!0,t.$pos=angular.extend(i(e[0]),{position:"absolute"}),t.$data=s.data,t.$content=n(s.content)(t)},this.hide=function(){return t.$show=!1},this.setTour=function(e){return t.$next=function(){return e.next()},t.$previous=function(){return e.previous()},t.$hasNext=function(){return e.hasNext()},t.$hasPrevious=function(){return e.hasPrevious()},t.$end=function(){return e.end()},t.$isLastStep=function(){return e.isLastStep()}}}],link:function(e,i,n,s){t.registerTemplate(e.templateName,s)}}}]);var Tour,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__indexOf=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};Tour=function(){function t(t,e){this.name=t,this.stepScope=__bind(this.stepScope,this),this.getStep=__bind(this.getStep,this),this.getElementStepData=__bind(this.getElementStepData,this),this.setSteps=__bind(this.setSteps,this),this.getElement=__bind(this.getElement,this),this.getTemplate=__bind(this.getTemplate,this),this.leave=__bind(this.leave,this),this.enter=__bind(this.enter,this),this.showStep=__bind(this.showStep,this),this.setActiveStep=__bind(this.setActiveStep,this),this.emit=__bind(this.emit,this),this.on=__bind(this.on,this),this.activate=__bind(this.activate,this),this.previous=__bind(this.previous,this),this.isLastStep=__bind(this.isLastStep,this),this.hasPrevious=__bind(this.hasPrevious,this),this.hasNext=__bind(this.hasNext,this),this.next=__bind(this.next,this),this.end=__bind(this.end,this),this.start=__bind(this.start,this),this.reset=__bind(this.reset,this),this.options=e,this.reset(),null!=e.enter&&this.on("enter",e.enter),null!=e.leave&&this.on("leave",e.leave),this.on("enter",this.enter),this.on("leave",this.leave),this.options.autostart&&this.start()}return t.PROPS=["content","data"],t.EVT_PROPS=["enter","leave","completed","started"],t.prototype.reset=function(){return this.index=!1,this.activeStep=null,this.lastStep=null},t.prototype.start=function(t){return null==t&&(t=0),this.setSteps(this.options.steps),null==this.activeStep?(this.setActiveStep(t),this.activate(),this.emit("started")):void 0},t.prototype.end=function(){return null!=this.activeStep?(this.emit("leave",this.activeStep),this.getTemplate().hide(),this.emit("complete"),this.reset()):void 0},t.prototype.next=function(){return this.setActiveStep(this.index+1)?this.activate():this.end()},t.prototype.hasNext=function(){return this.index<this.steps.length-1},t.prototype.hasPrevious=function(){return this.index>0},t.prototype.isLastStep=function(){return this.index===this.steps.length-1},t.prototype.previous=function(){return this.setActiveStep(this.index-1)?this.activate():void 0},t.prototype.activate=function(){return null!=this.lastStep&&this.emit("leave",this.lastStep),this.emit("enter",this.activeStep),this.showStep()},t.prototype.on=function(e,i){var n;return n=this,t.$rootScope.$on("$$tour-"+this.name+"-"+e,function(e,s,r){return t.$injector.invoke(i,n,{$scope:s,$step:r})})},t.prototype.emit=function(e,i){var n,s;return null==i&&(i=null),n=null,i&&(n=this.stepScope(i),(s=i[e])&&(null!=s.$$watchDelegate?s(n):t.$injector.invoke(s,this,{$scope:n,$step:i}))),t.$rootScope.$emit("$$tour-"+this.name+"-"+e,n,i)},t.prototype.setActiveStep=function(t){return t>=this.steps.length?this.index=null:t>=0?(this.index!==!1&&(this.lastStep=this.getStep(this.index)),this.index=t,this.activeStep=this.getStep(t),!0):void 0},t.prototype.showStep=function(){var t;return t=this.getTemplate(),t.setTour(this),t.show(this.getElement(),this.activeStep)},t.prototype.enter=function(){var t;return t=this.getElement(),null!=this.activeStep.activeClass?t.addClass(this.activeStep.activeClass):void 0},t.prototype.leave=function(){var t;return t=this.getElement(),null!=this.activeStep.activeClass?t.removeClass(this.activeStep.activeClass):void 0},t.prototype.getTemplate=function(){return t.templates[this.activeStep.template||"default"]},t.prototype.getElement=function(e){return null==e&&(e=this.activeStep),t.elements[e["for"]]},t.prototype.setSteps=function(t){var e,i,n,s,r;for(this.steps=[],e=this.options.stepDefault||{},s=0,r=t.length;r>s;s++)n=t[s],i=angular.extend({},e||{},n,this.getElementStepData(n)),null!=e.data&&(i.data=angular.extend({},e.data,n.data)),this.steps.push(i)},t.prototype.getElementStepData=function(e){var i,n,s,r;return n=this.getElement(e),null==n?{}:(s=n.scope(),r={},i=t.$parse,angular.forEach(t.PROPS.concat(t.EVT_PROPS),function(){return function(e){var o;if(o=n.attr("tour-"+e))return __indexOf.call(t.EVT_PROPS,e)>=0?o=i(o):"data"===e&&(o=s.$eval(o)),r[e]=o}}(this)),r)},t.prototype.getStep=function(){return this.steps[this.index]},t.prototype.stepScope=function(t){return angular.element(this.getElement(t)).scope()},t}(),angular.module("angular.tourist").provider("$tourist",function(){var t,e,i;i={},t={},e={},this.define=function(t,e){"object"==typeof t&&(e=t,t="default"),i[t]=e},this.$get=["$rootScope","$parse","$injector",function(n,s,r){var o;return o={},Tour.$rootScope=n,Tour.$parse=s,Tour.$injector=r,Tour.elements=t,Tour.templates=e,{get:function(n){if(null==n&&(n="default"),null==i[n])throw"You have not defined a tour configuration for "+n+"!";if(0===e.length)throw"You have not defined any templates for the tour!";if(0===t.length)throw"You have not defined any steps for the tour!";return o[n]||(o[n]=new Tour(n,i[n]))},registerStep:function(e,i){return t[e]=i},registerTemplate:function(t,i){return"object"==typeof t&&(i=t,t="default"),e[t||"default"]=i}}}]});